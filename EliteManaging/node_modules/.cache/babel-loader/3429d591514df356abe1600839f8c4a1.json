{"ast":null,"code":"var HTML5_MEDIA_EVENT;\n\n(function (HTML5_MEDIA_EVENT) {\n  HTML5_MEDIA_EVENT[\"PLAY\"] = \"play\";\n  HTML5_MEDIA_EVENT[\"PAUSE\"] = \"pause\";\n  HTML5_MEDIA_EVENT[\"ENDED\"] = \"Ended\";\n})(HTML5_MEDIA_EVENT || (HTML5_MEDIA_EVENT = {}));\n\nvar MEDIA_TYPE;\n\n(function (MEDIA_TYPE) {\n  MEDIA_TYPE[\"IFRAME\"] = \"IFRAME\";\n  MEDIA_TYPE[\"VIDEO\"] = \"VIDEO\";\n  MEDIA_TYPE[\"AUDIO\"] = \"AUDIO\";\n})(MEDIA_TYPE || (MEDIA_TYPE = {}));\n\nvar EVENT_TYPE;\n\n(function (EVENT_TYPE) {\n  EVENT_TYPE[\"PLAY\"] = \"Play\";\n  EVENT_TYPE[\"ENDED\"] = \"Ended\";\n  EVENT_TYPE[\"PAUSE\"] = \"Pause\";\n  EVENT_TYPE[\"TIME_WATCHED\"] = \"TimeWatched\";\n})(EVENT_TYPE || (EVENT_TYPE = {}));\n\nvar MediaAutoTrack =\n/** @class */\nfunction () {\n  function MediaAutoTrack(params, provider) {\n    var _a;\n\n    this.eventActionMapping = (_a = {}, _a[EVENT_TYPE.ENDED] = this.endedEventAction.bind(this), _a[EVENT_TYPE.PLAY] = this.playEventAction.bind(this), _a[EVENT_TYPE.PAUSE] = this.pauseEventAction.bind(this), _a);\n    var eventData = params.eventData;\n    this._params = params;\n    this._mediaElement = document.getElementById(eventData.properties['domElementId']);\n    this._started = false;\n    this._provider = provider;\n    var mediaTrackFunMapping = {\n      IFRAME: this._iframeMediaTracker,\n      VIDEO: this._html5MediaTracker,\n      AUDIO: this._html5MediaTracker\n    };\n\n    mediaTrackFunMapping[this._mediaElement.tagName].bind(this)();\n\n    this._initYoutubeFrame();\n  }\n\n  MediaAutoTrack.prototype._initYoutubeFrame = function () {\n    this._youTubeIframeLoader = {\n      src: 'https://www.youtube.com/iframe_api',\n      loading: false,\n      loaded: false,\n      listeners: [],\n      load: function (callback) {\n        var _this = this;\n\n        this.listeners.push(callback);\n\n        if (this.loaded) {\n          setTimeout(function () {\n            _this.done();\n          });\n          return;\n        }\n\n        if (this.loading) {\n          return;\n        }\n\n        this.loading = true;\n\n        window['onYouTubeIframeAPIReady'] = function () {\n          _this.loaded = true;\n\n          _this.done();\n        };\n\n        var script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = this.src;\n        document.body.appendChild(script);\n      },\n      done: function () {\n        delete window['onYouTubeIframeAPIReady'];\n\n        while (this.listeners.length) {\n          this.listeners.pop()(window['YT']);\n        }\n      }\n    };\n  };\n\n  MediaAutoTrack.prototype._iframeMediaTracker = function () {\n    var that = this;\n    setInterval(function () {\n      if (that._started) {\n        that.recordEvent(MEDIA_TYPE.IFRAME, EVENT_TYPE.TIME_WATCHED);\n      }\n    }, 3 * 1000);\n\n    this._youTubeIframeLoader.load(function (YT) {\n      that._iframePlayer = new YT.Player(that._mediaElement.id, {\n        events: {\n          onStateChange: that._onPlayerStateChange.bind(that)\n        }\n      });\n    });\n  };\n\n  MediaAutoTrack.prototype._onPlayerStateChange = function (event) {\n    var iframeEventMapping = {\n      0: EVENT_TYPE.ENDED,\n      1: EVENT_TYPE.PLAY,\n      2: EVENT_TYPE.PAUSE\n    };\n    var eventType = iframeEventMapping[event.data];\n\n    if (eventType) {\n      this.eventActionMapping[eventType](MEDIA_TYPE.IFRAME);\n    }\n  };\n\n  MediaAutoTrack.prototype._html5MediaTracker = function () {\n    var that = this;\n    setInterval(function () {\n      if (that._started) {\n        that.recordEvent(MEDIA_TYPE.VIDEO, EVENT_TYPE.TIME_WATCHED);\n      }\n    }, 3 * 1000);\n\n    this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PLAY, function () {\n      that.eventActionMapping[EVENT_TYPE.PLAY](MEDIA_TYPE.VIDEO);\n    }, false);\n\n    this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.PAUSE, function () {\n      that.eventActionMapping[EVENT_TYPE.PAUSE](MEDIA_TYPE.VIDEO);\n    }, false);\n\n    this._mediaElement.addEventListener(HTML5_MEDIA_EVENT.ENDED, function () {\n      that.eventActionMapping[EVENT_TYPE.ENDED](MEDIA_TYPE.VIDEO);\n    }, false);\n  };\n\n  MediaAutoTrack.prototype.playEventAction = function (mediaType) {\n    this._started = true;\n    this.recordEvent(mediaType, EVENT_TYPE.PLAY);\n  };\n\n  MediaAutoTrack.prototype.pauseEventAction = function (mediaType) {\n    this._started = false;\n    this.recordEvent(mediaType, EVENT_TYPE.PAUSE);\n  };\n\n  MediaAutoTrack.prototype.endedEventAction = function (mediaType) {\n    this._started = false;\n    this.recordEvent(mediaType, EVENT_TYPE.ENDED);\n  };\n\n  MediaAutoTrack.prototype.recordEvent = function (mediaType, eventType) {\n    var newParams = Object.assign({}, this._params);\n    var eventData = newParams.eventData;\n    eventData.eventType = eventType;\n\n    if (mediaType === MEDIA_TYPE.VIDEO) {\n      eventData.properties.timestamp = this._mediaElement.currentTime;\n      eventData.properties.duration = this._mediaElement.duration;\n    } else {\n      eventData.properties.timestamp = this._financial(this._iframePlayer.getCurrentTime());\n      eventData.properties.duration = this._financial(this._iframePlayer.getDuration());\n    }\n\n    var percentage = parseFloat(eventData.properties.timestamp) / parseFloat(eventData.properties.duration);\n    eventData.properties.eventValue = Number(percentage.toFixed(4));\n    delete eventData.properties.domElementId;\n\n    this._provider.putToBuffer(newParams);\n  };\n\n  MediaAutoTrack.prototype._financial = function (x) {\n    return Number.parseFloat(x).toFixed(4);\n  };\n\n  return MediaAutoTrack;\n}();\n\nexport { MediaAutoTrack };","map":{"version":3,"mappings":"AAcA,IAAKA,iBAAL;;AAAA,WAAKA,iBAAL,EAAsB;EACrBA;EACAA;EACAA;AACA,CAJD,EAAKA,iBAAiB,KAAjBA,iBAAiB,MAAtB;;AAKA,IAAKC,UAAL;;AAAA,WAAKA,UAAL,EAAe;EACdA;EACAA;EACAA;AACA,CAJD,EAAKA,UAAU,KAAVA,UAAU,MAAf;;AAKA,IAAKC,UAAL;;AAAA,WAAKA,UAAL,EAAe;EACdA;EACAA;EACAA;EACAA;AACA,CALD,EAAKA,UAAU,KAAVA,UAAU,MAAf;;AAOA;AAAA;AAAA;EAcC,wBAAYC,MAAZ,EAAmCC,QAAnC,EAA2C;;;IARnC,2BAAkBC,SACzBA,GAACH,UAAU,CAACI,KAAZ,IAAoB,KAAKC,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CADK,EAEzBH,GAACH,UAAU,CAACO,IAAZ,IAAmB,KAAKC,eAAL,CAAqBF,IAArB,CAA0B,IAA1B,CAFM,EAGzBH,GAACH,UAAU,CAACS,KAAZ,IAAoB,KAAKC,gBAAL,CAAsBJ,IAAtB,CAA2B,IAA3B,CAHK,IAAlB;IASC;IACR,KAAKK,OAAL,GAAeV,MAAf;IACA,KAAKW,aAAL,GAAqBC,QAAQ,CAACC,cAAT,CACpBC,SAAS,CAACC,UAAV,CAAqB,cAArB,CADoB,CAArB;IAGA,KAAKC,QAAL,GAAgB,KAAhB;IACA,KAAKC,SAAL,GAAiBhB,QAAjB;IACA,IAAMiB,oBAAoB,GAAG;MAC5BC,MAAM,EAAE,KAAKC,mBADe;MAE5BC,KAAK,EAAE,KAAKC,kBAFgB;MAG5BC,KAAK,EAAE,KAAKD;IAHgB,CAA7B;;IAMAJ,oBAAoB,CAAC,KAAKP,aAAL,CAAmBa,OAApB,CAApB,CAAiDnB,IAAjD,CAAsD,IAAtD;;IAEA,KAAKoB,iBAAL;EACA;;EAEOC,6CAAR;IACC,KAAKC,oBAAL,GAA4B;MAC3BC,GAAG,EAAE,oCADsB;MAE3BC,OAAO,EAAE,KAFkB;MAG3BC,MAAM,EAAE,KAHmB;MAI3BC,SAAS,EAAE,EAJgB;MAM3BC,IAAI,YAACC,QAAD,EAAS;QACZ,IAAMC,KAAK,GAAG,IAAd;;QACA,KAAKH,SAAL,CAAeI,IAAf,CAAoBF,QAApB;;QAEA,IAAI,KAAKH,MAAT,EAAiB;UAChBM,UAAU,CAAC;YACVF,KAAK,CAACG,IAAN;UACA,CAFS,CAAV;UAGA;QACA;;QAED,IAAI,KAAKR,OAAT,EAAkB;UACjB;QACA;;QAED,KAAKA,OAAL,GAAe,IAAf;;QAEAS,MAAM,CAAC,yBAAD,CAAN,GAAoC;UACnCJ,KAAK,CAACJ,MAAN,GAAe,IAAf;;UACAI,KAAK,CAACG,IAAN;QACA,CAHD;;QAKA,IAAME,MAAM,GAAG3B,QAAQ,CAAC4B,aAAT,CAAuB,QAAvB,CAAf;QACAD,MAAM,CAACE,IAAP,GAAc,iBAAd;QACAF,MAAM,CAACX,GAAP,GAAa,KAAKA,GAAlB;QACAhB,QAAQ,CAAC8B,IAAT,CAAcC,WAAd,CAA0BJ,MAA1B;MACA,CAhC0B;MAkC3BF,IAAI;QACH,OAAOC,MAAM,CAAC,yBAAD,CAAb;;QAEA,OAAO,KAAKP,SAAL,CAAea,MAAtB,EAA8B;UAC7B,KAAKb,SAAL,CAAec,GAAf,GAAqBP,MAAM,CAAC,IAAD,CAA3B;QACA;MACD;IAxC0B,CAA5B;EA0CA,CA3CO;;EA6CAZ,+CAAR;IACC,IAAMoB,IAAI,GAAG,IAAb;IACAC,WAAW,CAAC;MACX,IAAID,IAAI,CAAC9B,QAAT,EAAmB;QAClB8B,IAAI,CAACE,WAAL,CAAiBlD,UAAU,CAACqB,MAA5B,EAAoCpB,UAAU,CAACkD,YAA/C;MACA;IACD,CAJU,EAIR,IAAI,IAJI,CAAX;;IAKA,KAAKtB,oBAAL,CAA0BK,IAA1B,CAA+B,UAASkB,EAAT,EAAW;MACzCJ,IAAI,CAACK,aAAL,GAAqB,IAAID,EAAE,CAACE,MAAP,CAAcN,IAAI,CAACnC,aAAL,CAAmB0C,EAAjC,EAAqC;QACzDC,MAAM,EAAE;UAAEC,aAAa,EAAET,IAAI,CAACU,oBAAL,CAA0BnD,IAA1B,CAA+ByC,IAA/B;QAAjB;MADiD,CAArC,CAArB;IAGA,CAJD;EAKA,CAZO;;EAcApB,gDAAR,UAA6B+B,KAA7B,EAAkC;IACjC,IAAMC,kBAAkB,GAAG;MAC1B,GAAG3D,UAAU,CAACI,KADY;MAE1B,GAAGJ,UAAU,CAACO,IAFY;MAG1B,GAAGP,UAAU,CAACS;IAHY,CAA3B;IAKA,IAAMmD,SAAS,GAAGD,kBAAkB,CAACD,KAAK,CAACG,IAAP,CAApC;;IACA,IAAID,SAAJ,EAAe;MACd,KAAKE,kBAAL,CAAwBF,SAAxB,EAAmC7D,UAAU,CAACqB,MAA9C;IACA;EACD,CAVO;;EAYAO,8CAAR;IACC,IAAMoB,IAAI,GAAG,IAAb;IACAC,WAAW,CAAC;MACX,IAAID,IAAI,CAAC9B,QAAT,EAAmB;QAClB8B,IAAI,CAACE,WAAL,CAAiBlD,UAAU,CAACuB,KAA5B,EAAmCtB,UAAU,CAACkD,YAA9C;MACA;IACD,CAJU,EAIR,IAAI,IAJI,CAAX;;IAKA,KAAKtC,aAAL,CAAmBmD,gBAAnB,CACCjE,iBAAiB,CAACS,IADnB,EAEC;MACCwC,IAAI,CAACe,kBAAL,CAAwB9D,UAAU,CAACO,IAAnC,EAAyCR,UAAU,CAACuB,KAApD;IACA,CAJF,EAKC,KALD;;IAOA,KAAKV,aAAL,CAAmBmD,gBAAnB,CACCjE,iBAAiB,CAACW,KADnB,EAEC;MACCsC,IAAI,CAACe,kBAAL,CAAwB9D,UAAU,CAACS,KAAnC,EAA0CV,UAAU,CAACuB,KAArD;IACA,CAJF,EAKC,KALD;;IAQA,KAAKV,aAAL,CAAmBmD,gBAAnB,CACCjE,iBAAiB,CAACM,KADnB,EAEC;MACC2C,IAAI,CAACe,kBAAL,CAAwB9D,UAAU,CAACI,KAAnC,EAA0CL,UAAU,CAACuB,KAArD;IACA,CAJF,EAKC,KALD;EAOA,CA7BO;;EA+BAK,2CAAR,UAAwBqC,SAAxB,EAAiC;IAChC,KAAK/C,QAAL,GAAgB,IAAhB;IACA,KAAKgC,WAAL,CAAiBe,SAAjB,EAA4BhE,UAAU,CAACO,IAAvC;EACA,CAHO;;EAKAoB,4CAAR,UAAyBqC,SAAzB,EAAkC;IACjC,KAAK/C,QAAL,GAAgB,KAAhB;IACA,KAAKgC,WAAL,CAAiBe,SAAjB,EAA4BhE,UAAU,CAACS,KAAvC;EACA,CAHO;;EAKAkB,4CAAR,UAAyBqC,SAAzB,EAAkC;IACjC,KAAK/C,QAAL,GAAgB,KAAhB;IACA,KAAKgC,WAAL,CAAiBe,SAAjB,EAA4BhE,UAAU,CAACI,KAAvC;EACA,CAHO;;EAKAuB,uCAAR,UAAoBqC,SAApB,EAAuCJ,SAAvC,EAAwD;IACvD,IAAMK,SAAS,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKxD,OAAvB,CAAlB;IACQ;IACRI,SAAS,CAAC6C,SAAV,GAAsBA,SAAtB;;IACA,IAAII,SAAS,KAAKjE,UAAU,CAACuB,KAA7B,EAAoC;MACnCP,SAAS,CAACC,UAAV,CAAqBoD,SAArB,GAAiC,KAAKxD,aAAL,CAAmByD,WAApD;MACAtD,SAAS,CAACC,UAAV,CAAqBsD,QAArB,GAAgC,KAAK1D,aAAL,CAAmB0D,QAAnD;IACA,CAHD,MAGO;MACNvD,SAAS,CAACC,UAAV,CAAqBoD,SAArB,GAAiC,KAAKG,UAAL,CAChC,KAAKnB,aAAL,CAAmBoB,cAAnB,EADgC,CAAjC;MAGAzD,SAAS,CAACC,UAAV,CAAqBsD,QAArB,GAAgC,KAAKC,UAAL,CAC/B,KAAKnB,aAAL,CAAmBqB,WAAnB,EAD+B,CAAhC;IAGA;;IACD,IAAMC,UAAU,GACfC,UAAU,CAAC5D,SAAS,CAACC,UAAV,CAAqBoD,SAAtB,CAAV,GACAO,UAAU,CAAC5D,SAAS,CAACC,UAAV,CAAqBsD,QAAtB,CAFX;IAGAvD,SAAS,CAACC,UAAV,CAAqB4D,UAArB,GAAkCC,MAAM,CAACH,UAAU,CAACI,OAAX,CAAmB,CAAnB,CAAD,CAAxC;IACA,OAAO/D,SAAS,CAACC,UAAV,CAAqB+D,YAA5B;;IACA,KAAK7D,SAAL,CAAe8D,WAAf,CAA2Bf,SAA3B;EACA,CArBO;;EAuBAtC,sCAAR,UAAmBsD,CAAnB,EAAoB;IACnB,OAAOJ,MAAM,CAACF,UAAP,CAAkBM,CAAlB,EAAqBH,OAArB,CAA6B,CAA7B,CAAP;EACA,CAFO;;EAGT;AAAC,CAhLD","names":["HTML5_MEDIA_EVENT","MEDIA_TYPE","EVENT_TYPE","params","provider","_a","ENDED","endedEventAction","bind","PLAY","playEventAction","PAUSE","pauseEventAction","_params","_mediaElement","document","getElementById","eventData","properties","_started","_provider","mediaTrackFunMapping","IFRAME","_iframeMediaTracker","VIDEO","_html5MediaTracker","AUDIO","tagName","_initYoutubeFrame","MediaAutoTrack","_youTubeIframeLoader","src","loading","loaded","listeners","load","callback","_this","push","setTimeout","done","window","script","createElement","type","body","appendChild","length","pop","that","setInterval","recordEvent","TIME_WATCHED","YT","_iframePlayer","Player","id","events","onStateChange","_onPlayerStateChange","event","iframeEventMapping","eventType","data","eventActionMapping","addEventListener","mediaType","newParams","Object","assign","timestamp","currentTime","duration","_financial","getCurrentTime","getDuration","percentage","parseFloat","eventValue","Number","toFixed","domElementId","putToBuffer","x"],"sources":["C:\\Users\\jacob\\OneDrive\\College\\github\\resumeprojectsrepo\\resumeprojects\\EliteManaging\\node_modules\\@aws-amplify\\analytics\\src\\Providers\\AmazonPersonalizeHelper\\MediaAutoTrack.ts"],"sourcesContent":["/*\n * Copyright 2019-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nimport { RequestParams } from './DataType';\n\nenum HTML5_MEDIA_EVENT {\n\t'PLAY' = 'play',\n\t'PAUSE' = 'pause',\n\t'ENDED' = 'Ended',\n}\nenum MEDIA_TYPE {\n\t'IFRAME' = 'IFRAME',\n\t'VIDEO' = 'VIDEO',\n\t'AUDIO' = 'AUDIO',\n}\nenum EVENT_TYPE {\n\t'PLAY' = 'Play',\n\t'ENDED' = 'Ended',\n\t'PAUSE' = 'Pause',\n\t'TIME_WATCHED' = 'TimeWatched',\n}\n\nexport class MediaAutoTrack {\n\tprivate _mediaElement;\n\tprivate _provider;\n\tprivate _params;\n\tprivate _started;\n\tprivate _iframePlayer;\n\tprivate eventActionMapping = {\n\t\t[EVENT_TYPE.ENDED]: this.endedEventAction.bind(this),\n\t\t[EVENT_TYPE.PLAY]: this.playEventAction.bind(this),\n\t\t[EVENT_TYPE.PAUSE]: this.pauseEventAction.bind(this),\n\t};\n\n\tprivate _youTubeIframeLoader;\n\n\tconstructor(params: RequestParams, provider) {\n\t\tconst { eventData } = params;\n\t\tthis._params = params;\n\t\tthis._mediaElement = document.getElementById(\n\t\t\teventData.properties['domElementId']\n\t\t);\n\t\tthis._started = false;\n\t\tthis._provider = provider;\n\t\tconst mediaTrackFunMapping = {\n\t\t\tIFRAME: this._iframeMediaTracker,\n\t\t\tVIDEO: this._html5MediaTracker,\n\t\t\tAUDIO: this._html5MediaTracker,\n\t\t};\n\n\t\tmediaTrackFunMapping[this._mediaElement.tagName].bind(this)();\n\n\t\tthis._initYoutubeFrame();\n\t}\n\n\tprivate _initYoutubeFrame() {\n\t\tthis._youTubeIframeLoader = {\n\t\t\tsrc: 'https://www.youtube.com/iframe_api',\n\t\t\tloading: false,\n\t\t\tloaded: false,\n\t\t\tlisteners: [],\n\n\t\t\tload(callback) {\n\t\t\t\tconst _this = this;\n\t\t\t\tthis.listeners.push(callback);\n\n\t\t\t\tif (this.loaded) {\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t_this.done();\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this.loading) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.loading = true;\n\n\t\t\t\twindow['onYouTubeIframeAPIReady'] = function() {\n\t\t\t\t\t_this.loaded = true;\n\t\t\t\t\t_this.done();\n\t\t\t\t};\n\n\t\t\t\tconst script = document.createElement('script');\n\t\t\t\tscript.type = 'text/javascript';\n\t\t\t\tscript.src = this.src;\n\t\t\t\tdocument.body.appendChild(script);\n\t\t\t},\n\n\t\t\tdone() {\n\t\t\t\tdelete window['onYouTubeIframeAPIReady'];\n\n\t\t\t\twhile (this.listeners.length) {\n\t\t\t\t\tthis.listeners.pop()(window['YT']);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t}\n\n\tprivate _iframeMediaTracker(): void {\n\t\tconst that = this;\n\t\tsetInterval(function() {\n\t\t\tif (that._started) {\n\t\t\t\tthat.recordEvent(MEDIA_TYPE.IFRAME, EVENT_TYPE.TIME_WATCHED);\n\t\t\t}\n\t\t}, 3 * 1000);\n\t\tthis._youTubeIframeLoader.load(function(YT) {\n\t\t\tthat._iframePlayer = new YT.Player(that._mediaElement.id, {\n\t\t\t\tevents: { onStateChange: that._onPlayerStateChange.bind(that) },\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate _onPlayerStateChange(event): void {\n\t\tconst iframeEventMapping = {\n\t\t\t0: EVENT_TYPE.ENDED,\n\t\t\t1: EVENT_TYPE.PLAY,\n\t\t\t2: EVENT_TYPE.PAUSE,\n\t\t};\n\t\tconst eventType = iframeEventMapping[event.data];\n\t\tif (eventType) {\n\t\t\tthis.eventActionMapping[eventType](MEDIA_TYPE.IFRAME);\n\t\t}\n\t}\n\n\tprivate _html5MediaTracker(): void {\n\t\tconst that = this;\n\t\tsetInterval(function() {\n\t\t\tif (that._started) {\n\t\t\t\tthat.recordEvent(MEDIA_TYPE.VIDEO, EVENT_TYPE.TIME_WATCHED);\n\t\t\t}\n\t\t}, 3 * 1000);\n\t\tthis._mediaElement.addEventListener(\n\t\t\tHTML5_MEDIA_EVENT.PLAY,\n\t\t\t() => {\n\t\t\t\tthat.eventActionMapping[EVENT_TYPE.PLAY](MEDIA_TYPE.VIDEO);\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t\tthis._mediaElement.addEventListener(\n\t\t\tHTML5_MEDIA_EVENT.PAUSE,\n\t\t\t() => {\n\t\t\t\tthat.eventActionMapping[EVENT_TYPE.PAUSE](MEDIA_TYPE.VIDEO);\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\n\t\tthis._mediaElement.addEventListener(\n\t\t\tHTML5_MEDIA_EVENT.ENDED,\n\t\t\t() => {\n\t\t\t\tthat.eventActionMapping[EVENT_TYPE.ENDED](MEDIA_TYPE.VIDEO);\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t}\n\n\tprivate playEventAction(mediaType) {\n\t\tthis._started = true;\n\t\tthis.recordEvent(mediaType, EVENT_TYPE.PLAY);\n\t}\n\n\tprivate pauseEventAction(mediaType) {\n\t\tthis._started = false;\n\t\tthis.recordEvent(mediaType, EVENT_TYPE.PAUSE);\n\t}\n\n\tprivate endedEventAction(mediaType) {\n\t\tthis._started = false;\n\t\tthis.recordEvent(mediaType, EVENT_TYPE.ENDED);\n\t}\n\n\tprivate recordEvent(mediaType: string, eventType: string): void {\n\t\tconst newParams = Object.assign({}, this._params);\n\t\tconst { eventData } = newParams;\n\t\teventData.eventType = eventType;\n\t\tif (mediaType === MEDIA_TYPE.VIDEO) {\n\t\t\teventData.properties.timestamp = this._mediaElement.currentTime;\n\t\t\teventData.properties.duration = this._mediaElement.duration;\n\t\t} else {\n\t\t\teventData.properties.timestamp = this._financial(\n\t\t\t\tthis._iframePlayer.getCurrentTime()\n\t\t\t);\n\t\t\teventData.properties.duration = this._financial(\n\t\t\t\tthis._iframePlayer.getDuration()\n\t\t\t);\n\t\t}\n\t\tconst percentage =\n\t\t\tparseFloat(eventData.properties.timestamp) /\n\t\t\tparseFloat(eventData.properties.duration);\n\t\teventData.properties.eventValue = Number(percentage.toFixed(4));\n\t\tdelete eventData.properties.domElementId;\n\t\tthis._provider.putToBuffer(newParams);\n\t}\n\n\tprivate _financial(x) {\n\t\treturn Number.parseFloat(x).toFixed(4);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}